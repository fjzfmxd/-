# Python基本类型
在现实世界中，不同种类的数据，能够执行的操作也不一样，比如说数字可以进行加减，而居住地址则只能用来导航和访问。因此，在程序设计中，我们一般有“类型”的概念，不同类型的数据有着不同的样式和能够执行的操作。  
同时，这也符合计算机存储和表示数据的基本要求，例如`我叫张三，今年19岁，体重78.6千克`,其中`张三`是一串字符，`19`则是整数，而`76.8`这个数值还包含小数部分，它们在计算机中的存储和表示方式是完全不一样的。

Python语言属于强类型语言，什么意思呢？每个数据都必须有自己的类型，同类型、不同类型的数据之间的操作必须符合或指定一定的规则。比如字符串`"123"`和数字`4`相加是没有意义的。

>某些编程语言属于弱类型语言，类型检查并不严格，同一个数据根据不同情况可能会进行类型的自动转换，例如VB和JavaScript，然而大部分情况下，这是一种灾难。太过自由往往并不是一件好事。

Python内置了丰富的数据类型，为编写代码提供了极大的便利，它们包括：
- 整数(int)
- 浮点数(float)
- 布尔型(bool)
- 字符串(str)
- 元组(tuple)
- 列表(list)
- 字典(dict)
- ……

其中整数和浮点数都是数值型，能够进行数学运算。今天我们主要学习数值型、布尔型和字符串。

## 一、数值型(int和float)

Python中的数值类型其实有三类：整数(`int`)、浮点数(`float`)和复数(`complex`)，复数我们不做介绍。  

如果需要，我们可以使用type()函数来查看变量的类型。使用交互式方式执行的示例如下：
```
>>> type(3)
<class 'int'>
>>> type(3.5)
<class 'float'>
>>> x = 3
>>> type(x)
<class 'int'>
>>> type("hello world")
<class 'str'>
```
其中`>>>`表示交互式执行时的输入提示符，在后面的课程我们用这样的方式来表示交互式执行的输入和输出。

### 1、整数类型(int)
Python中整数类型和数学中的整数概念是一样的，整数类型的名称为`int`，可以是负整数、0或正整数，例如`123`、`-97`、`+86`、`-0`等。  

和其它编程语言不同的是，**在Python中，整数无大小限制范围**，可以无限大或无限小。（是的，绝大部分编程语言的整数都是有取值范围限制的，例如C语言中根据机器的不同，最大的整数可能只有65535，超出就可能产生错误。）  

下面是Python中一个大整数示例：  
```
>>> pow(2, 128)
340282366920938463463374607431768211456
```

### 2、浮点数类型(float)

浮点数，即带小数点的数，类型名称为`float`，这些字面常量都是浮点数：`3.14`、`-12.2`、`3.0`、`0.0`、`-4.0`  
需要注意的是，`3.0`、`0.0`和`-4.0`也是浮点数，而不是整数。**只要包含了小数点，就是浮点数。**  
这样子写也是可以的，表示省略了小数点前后的0：  
`5.`、`3.`、`.14`

浮点数还可以用形如`<a>e<b>`的科学计数法来表示字面常量，科学计数法`<a>e<b>`表示的值为a*10<sup>b</sup>。
例如：`3e5`表示300000.0,`-3E4`表示\-30000.0，`3e-4`表示0.0003等。  
需要注意的是科学计数法形式记录的数值也一定是浮点数，`3e5`表示的是300000.0，而不是300000。

**浮点数的一个重要特性是：有存储范围和精度限制**，也就是说使用浮点数保存和计算数据时，有最大最小范围，而且可能会存在一定的误差。具体范围和误差根据机器的不同而不同。例如在我的电脑上，Python计算`0.1*3`的结果是0.30000000000000004，而不是0.3。

>带有小数点的数为什么叫**浮点**数？为什么浮点数会有大小和精度限制？在第三章的内容里，我们会进一步介绍。

### 3、数值型的运算

Python内部提供了9种基本的数值类型运算操作符。

<table>
    <thead>
        <tr>
            <th><strong>操作符</strong></th>
            <th><strong>含义</strong></th>
            <th><strong>优先级</strong></th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>x+y</td>
            <td>x加上y</td>
            <td rowspan="2">低</td>
        </tr>
        <tr>
            <td>x-y</td>
            <td>x减去y</td>
        </tr>
        <tr>
            <td>x*y</td>
            <td>x乘以y</td>
            <td rowspan="4">中</td>
        </tr>
        <tr>
            <td>x/y</td>
            <td>x除以y</td>
        </tr>
        <tr>
            <td>x//y</td>
            <td>x整除y，即不大于x与y之商的最大整数</td>
        </tr>
        <tr>
            <td>x%y</td>
            <td>x与y之商的余数，又称为模运算</td>
        </tr>
        <tr>
            <td>-x</td>
            <td>x的负值</td>
            <td rowspan="2">高</td>
        </tr>
        <tr>
            <td>+x</td>
            <td>x本身</td>
        </tr>
        <tr>
            <td>x**y</td>
            <td>x的y次幂，即xy</td>
            <td>最高</td>
        </tr>
    </tbody>
</table>

下面对一些运算符进行进一步的解释。

#### (1)整除运算 //

`a//b`的结果为不大于除法结果的最大整数，即**向左取整**。  
向左取整的意思是在实数坐标轴上，取比它小也就是坐标轴上左侧的第一个整数。例如4.2向左取整为4，-7.8向左取整为8。下面是交互式运行查看结果的几个例子：
```
>>> 10//3
3
>>> -10//-3
3
>>> -10//3
-4
>>> 10.2//3.5
2.0
>>> 10.2//-3.0
-4.0
```

`-10//3`的结果是-4，这是因为-10除以3结果是-3.3，向左取整(不大于-3.3的最大整数)是-4。

#### (2)模运算 %

a%b的结果为a除以b的余数，它的本质是：`a%b = a – (a//b)*b`

如果两个操作数的符号相同，余数很好理解；如果符号不同，则需要小心计算，避免错误。  
示例：
```
>>> 10%4
2
>>> 10%3.0
1.0
>>> -10%3
2
>>> 10%-3
-2
>>> -12%-5
-2
```
计算过程示例：
```
-10%3 = -10 - (-10//3)*3 = -10 -(-4)*3 = 2
10%-3 = 10 - (10//-3)*(-3) = 10 - (-4)*(-3) = -2
```



#### (3) 增强赋值运算

上表中的所有二元数学运算符（+、-、\*、/、//、%、\*\*）都有与之对应的增强赋值运算符，如`x += 3`表示`x = x+3`，`x //= 10`表示`x = x//10`等。

注意：增强赋值运算中，=和前面的数学运算符不能有空格，必须连起来。

### 4、数值型运算结果的类型

细心的同学可能发现了一个问题，明明有些操作的结果应该都是整数，为什么有的结果有.0（浮点数），而有的则没有（整数），例如`12/4`的结果为`3.0`，`12//4`的结果为`3`，`12.0//4`的结果为`3.0`。这就涉及到数值操作结果属于什么类型的问题。因为整数可以看作没有小数的浮点数，所以它们之间存在一种逐渐扩展的关系：

整数-\>浮点数

为了确保结果的正确性，数值操作的结果类型一般尽量“偏向”后者，具体规则如下：

- 有浮点数作为操作数，结果一定为浮点数，例如`4.0//2`结果为`2.0`，`1+6%4.0`结果为`3.0`
- 操作数全部为整数
  - 如果数学上结果为浮点数，结果为浮点数
    - 除法的结果一定是浮点数，如`4/2`结果为`2.0`
    - `2**(-1)`的结果为浮点数`0.5`
  - 否则结果为整数

下面是几个例子：
```
>>> 4*2
8
>>> 4*2.0
8.0
>>> 4/2
2.0
>>> 4//2
2
>>> 4.0//2
2.0
```


### 5、运算符的优先级

这些运算符的含义我们已经基本理解了，但是**优先级**是什么意思？其实优先级和我们数学运算中的优先级概念是一样的，比如`3+4*5`，应该是先算乘法，再算加法，如果我们需要先算加法，就要加括号，`(3+4)*5`，数值运算时相同优先级情况下**自左向右结合**。数值运算的优先级在前面的表格中已经进行了标注。

我们来看几个例子：
```
>>> 3*2**-1
1.5
>>> 10//3%4
3
>>> 4*+-3
-12
>> -3**2
-9
```

在不清楚或可能会让人误解的地方，建议使用小括号来提升优先级，比如`3*2**-1`可以写成`3*(2**-1)`，`-3**2`写为`-(3**2)`，代码会更加清晰明了。

示例：

<img src="https://gitee.com/nixius/rb/raw/master/formulas/sample.png" height="250" align="center"/>

>注意：提升优先级只能使用小括号`()`，不能使用中括号`[]`和大括号`{}`，这样写是**错误**的：`3*[(2+4)*5+8]`

### 6、数值类型的相互转换

整数和浮点数之间的转换非常简单，使用类型名作为函数进行转换即可。

#### (1)整数到浮点数
```
>>> x = 3
>>> y = float(x)  #y的值为3.0，为浮点数类型
```

#### (2)浮点数到整数
- 使用`int(x)`函数返回浮点数x的整数部分，不进行四舍五入。
```
>>> int(3.2)
3
>>> int(3.8)
3
>>> int(-4.9)
-4
```
- 使用`round(x)`函数返回浮点数x的四舍五入结果。
```
>>> round(3.2)
3
>>> round(3.8)
4
>>> round(-4.9)
-5
```


### 7、math库的使用

`math`库是Python内置的库，无需安装即可使用，提供了常见的数学常数和函数。要使用库，必须先使用`import`语句进行导入，下面是一个示例：
```python
import math      # 导入math库
x = math.ceil(4.3)    # math.ceil()函数向下取整
y = math.cos(math.pi/3)  # math.pi为PI值，math.cos()函数计算余弦值

```

下面是一些`math`库中常用的常数和函数：
| **math库内容**      | **说明**                                                           |
|---------------------|--------------------------------------------------------------------|
| math.pi             | 圆周率，值为3.14159265……                                           |
| math.e              | 自然对数，值为2.71828……                                            |
| math.sqrt(x)        | x的平方根                                                          |
| math.log(x, base=e) | 对x求底为base的对数值,base默认为自然对数 |
| math.sin(x)         | 返回x的正弦函数值，x是弧度值                                       |
| math.cos(x)         | 返回x的余弦函数值，x是弧度值                                       |
| math.tan(x)         | 返回x的正切函数值，x是弧度值                                       |
| math.radians(x)     | x为角度值，返回其弧度值                                            |
| math.degrees(x)     | x为弧度值，返回其角度值                                            |

需要注意的时，`math`库默认使用`弧度单位`，如果计算角度值的三角函数，需要先使用`math.radians()`函数进行转换。

>不使用math库中的`math.sqrt()`函数，如何计算x的平方根？`x**0.5`


## 二、布尔型(bool)

布尔型就是我们的逻辑类型，它只有两种取值：真和假。布尔型在程序设计中非常重要，是后面要学习的条件语句的基本元素。

在Python中，真为True，假为False。请注意首字母需要大写。

```
>>> type(True)
<class 'bool'>
>>> type(False)
<class 'bool'>
```



### 1、布尔操作
布尔型的操作也只有三个：`not`、`and`、`or`，对应这逻辑值的非、与、或。
- `not x` x为True时，结果为False；x为False时，结果为True
- `x and y` 当且仅当x和y都为True时，结果为True
- `x or y` 当且仅当x和y都为False时，结果为False

示例：
```
>>> x = not True   #False
>>> x = True and False #False
>>> x = False or True #True
```

它们之间的优先级关系为：` or < and < not`

例如：`True and False or True and not False or True and False and not False`，结果为`True`。

另外，需要说明的是，Python解释器在计算布尔操作的时候是会偷懒的，有两种情况：
- and操作符的左边是False。比如：`False and (True and False or True and not False or True and False)`，解释器发现`and`的左边是`False`，不管右边的结果是什么，结果肯定是`False`,于是右边它就不进行计算了。
- or操作符的左边是True。比如：`True or (True and False or True and not False or True and False)`，`or`的左边是`True`，结果必然是`True`，不管右边的结果是什么，结果肯定是`True`，于是右边它就不进行计算了。

### 2、比较操作符

前面我们学习了数值类型，其实数值类型还有一类基本运算：比较运算，结果为布尔型。比较运算包括的运算符有6个，它们之间的优先级是相同的，自左向右结合：

| **运算符** | **含义** |
|------------|----------|
| \<         | 小于     |
| \<=        | 小于等于 |
| \>         | 大于     |
| \>=        | 大于等于 |
| ==         | 等于     |
| !=         | 不等于   |

比较运算符的优先级要高于布尔运算符，而且可以连续比较，示例：
```
>>> 4<=5
True
>>> 5>3 and 9<10
True
>>> 4.0<5>2==2.0
True
>>> 5+1<9-6>2
False
```

练习：写出下面表达式的结果：
- `3 >= 2+1 or 4 != 6`
- `4-2 == 2 and True`
- `6 == 2*3 > 5 and not 3 != 4`
- `9 > 5 and 10 < 9 or 8 > 7`
- `False or not 5 < 3`


## 三、字符串（str）

字符串是Python基本数据类型中的非常重要的一种，是一连串字符所组成的序列。

### 1、字符串类型的表示

字符串的表示很简单，使用单引号或者双引号或者三引号包含起来的部分，就成为了一个字符串，例如：

```python
x = '这是一个单引号包含的字符串，内部可以使用双引号"作为一部分'
y = "这是一个双引号包含的字符串，内部可以使用单引号'作为一部分"
z = '''这是一个三引号包含的字符串，内部可以使用单引号'和双引号"作为一部分，
还可以进行换行'''
```

总结如下：
1. 单引号包含的字符串不能直接包含单引号和换行符
2. 双引号包含的字符串不能直接包含双引号和换行符
3. 三引号包含的字符串可以随意包含单双引号和换行

如果要在单引号包含的字符串使用单引号或双引号包含的字符串里使用双引号怎么办？Python为我们提供了`转义字符`，使用反斜杠加特定字符表示。常用转义字符列表如下：

| **转义字符** | **描述**   |
|--------------|------------|
| \\(在行尾时) | 续行符     |
| \\\\         | 反斜杠符号 |
| \\'          | 单引号     |
| \\"          | 双引号     |
| \\n          | 换行       |
| \\t          | 横向制表符 |
| \\r          | 回车       |

示例：
```
>>> print("abc\
... 123")
abc123
>>> print('abc\\123')
abc123
>>> print('abc\'123')
abc'123
>>> print('abc\n123')
abc
123
>>> print('abc\t123\txyz')
abc    123    xyz
```

### 2、字符串的基本操作：索引

我们可以使用索引来访问序列的某个位置上的内容，字符串是字符组成的序列。**在Python中，序列可以正向递增序号和反向递减序号，正向时第一个元素编号为0，反向时最后一个元素编号为-1**。

<img src="https://gitee.com/nixius/rb/raw/master/indexing.png" height="150" align="center"/>

使用索引访问序列中的某个元素的样式为：`序列[编号]`
```
>>> x = "abcde"
>>> x[0]
'a'
>>> x[1]
'b'
>>> x[4]
'e'
>>> x[5]
IndexError: string index out of range
>>> x[-1]
'e'
>>> x[-2]
'd'
>>> x[-5]
'a'
>>> x[-6]
IndexError: string index out of range
```
在使用索引时，如果编号超出了范围，则会抛出错误。

也可以直接在字面字符串后加索引访问：

```
>>> x = 2
>>> "abcde"[x]
'c'
```

### 3、字符串的基本操作：切片

对序列使用切片时，可以得到序列的一部分，结果仍然为序列。

切片的格式为：`序列[开始编号:结束编号:步进]`

（1）`:步进`可以省略，表示默认为`1`

（2）`开始编号`和`结束编号`可以省略，表示默认起始和终止，但第一个`:`不能省略

（3）返回的序列不包含结束编号的元素

示例：
```
>>> x='abcde'
>>> x[:]
'abcde'
>>> x[0:2]
'ab'
>>> x[0:-1]
'abcd'
>>> x[0:]
'abcde'
>>> x[:-2]
'abc'
>>> x[0:4:2]
'ac'
>>> x[::-1]
'edcba'
```

### 4、字符串的基本操作：加法和乘法

使用加法`+`可以对两个字符串进行连接，得到一个新的拼接字符串。
```
>>> "abc"+"123"
'abc123'
```
字符串的乘法`*`表示重复多次。
```
>>> "abc"*2
'abcabc'
>>> 3*"ab"
'ababab'
```

### 5、字符串的基本操作：比较

所有的比较操作符字符串都可以使用，需要注意的是，字符串比较时按顺序比较，比较的是字符的Unicode序号，在这种比较方式下，`数字字符<大写英文字母<小写英文字母<汉字`。

示例：
```
>>> '0'<'9'<'A'<'Z'<'a'<'z'<'中'
True
>>> '1bc'<'aBC'
True
>>> 'abc'<'abcd'
True
>>> '1234'<'234'
True
```

### 6、字符串的基本操作：其它常用函数

- `len(str)`返回字符串的长度  
示例：
```
>>> len("abcde")
5
>>> len("")
0
```

- `str.lower()`返回新的字符串，内容全部小写化
- `str.upper()`返回新的字符串，内容全部大写化  
示例：
```
>>> "AbC".lower()
'abc'
>>> x = "ABCDE"
>>> y = x.lower()
>>> print(x)
ABCDE
>>> print(y)
abcde
```

### 7、数值型与字符串的转换

#### (1)数值型到字符串

- `str(x)`
  - 返回任意变量x对应的字符串形式

示例：
```
>>> str(123)
'123'
>>> str(3.0)
'3.0'
>>> str(1/3)
'0.3333333333333333'
>>> str(False)
'False'
>>> str(3<5)
'True'
```

#### (2)字符串到整数
- `int(s)`
  - 返回字符串s对应的整数
- `float(s)`
  - 返回字符串s对应的浮点数
- `eval(s)`
  - 返回字符串s的表达式结果

示例：
```
>>> int("123")
123
>>> int("123.4")
ValueError: invalid literal for int() with base 10: '123.4'
```

```
>>> float("3.1")
3.1
>>> float("3")
3.0
```

```
>>> eval("3")
3
>>> eval("3.0")
3.0
```

### 8、`str.format()`函数
格式如下：`s.format(x0, x1, x2, ……)`  
其中`s`称为`模板字符串`，包含了一些`空槽`，format函数将参数`x0`,`x1`,`x2`…等插入s的槽中，返回新的字符串。

#### (1)匿名槽
`匿名槽`的格式为`{}`，将参数按序插入空槽中。  
<img src="https://gitee.com/nixius/rb/raw/master/format1.png" height="120" align="center"/>  
结果为：`"我们要在2035年，基本实现社会主义现代化"`

#### (2)序号槽
`序号槽`的格式为`{序号}`，将第i个参数插入序号槽`{i}`中(参数和槽的序号都从0开始)。  
<img src="https://gitee.com/nixius/rb/raw/master/format2.png" height="150" align="center"/>  
结果为：`"张三今年19岁，李四也是19岁"`

示例：
```
>>> "{}-{}-{}".format('a',1,4.0)
'a-1-4.0'
>>> "{0}-{1}-{2}".format('a',1,4.0)
'a-1-4.0'
>>> "{2}-{0}-{1}".format('a',1,4.0)
'4.0-a-1'
```

#### (3)带有格式的槽
在槽中加入`:格式字符串`用于控制插入时的具体格式，具体形式如下：  
`{:[填充符][对齐方式][宽度][千位符][.精度][类型]}`

填充符：任意单字符，设定宽度后，将填充多余空白  
对齐方式：`<`左对齐，`>`右对齐，`^`居中  
宽度：设置打印后的占位宽度  
千位符：`,`表示是否打印数字千位符  
精度：若类型为浮点数，表示小数点后精度；若为字符串，表示保留长度  
类型：字符串为`s`，整数为`d`，浮点数为`f`

简单示例：
```python
studentCount = 46
studentPassCount = 43
passRate = studentPassCount / studentCount
print("学员的及格率为{}%".format(passRate*100))
```
输出结果为：`学员的及格率为93.47826086956522%`  
如果把最后一行`print`改为:
```python
print("学员的及格率为{:.2f}%".format(passRate*100))
```
或者改为：
```python
print("学员的及格率为{0:.2f}%".format(passRate*100))
```
则输出结果为：`学员的及格率为93.48%`，通过格式`:.2f`控制只显示2位有效小数。


